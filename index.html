<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#ffffff" />
  <title>Jesper i rummet</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="topbar">
    <div class="topbar__left">
      <div class="brand">âœ¨Jul med JESPâœ¨</div>
      <div class="countdown">Tillbaka till mitt hÃ¶rn: <span id="countdownValue" class="countdown__value">â€¦</span></div>
    </div>
    <div class="topbar__right">
      <button id="soundBtn" class="btn">ğŸ”Š Ljud: AV</button>
      <button id="helpBtn" class="btn btn--alt">?</button>
    </div>
  </header>

  <main class="app">
    <section class="screen" aria-label="Spel">
      <canvas id="game"></canvas>

      <!-- GIF-overlay fÃ¶r tavlan (mer pÃ¥litlig GIF-animation Ã¤n att rita GIF i canvas) -->
      <div id="tavlaOverlay" class="tavlaOverlay" aria-hidden="true">
        <img id="tavlaGif" class="tavlaOverlay__img" src="assets/tavla.gif" alt="" />
      </div>

      <div id="toast" class="toast hidden"></div>
      <div id="bubble" class="bubble hidden"></div>
      <div class="hint">Det blir bra till jul</div>
    </section>

    <section class="controls" aria-label="Kontroller">
      <button id="kickBtn" class="btn btn--big">ğŸ‘Š Punch</button>
      <button id="sitBtn" class="btn btn--big btn--alt">ğŸª‘ Sit</button>
    </section>
  </main>

  <div id="helpModal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal__card">
      <div class="modal__title">WTF!?</div>
      <div class="modal__body">
        <p><b>Spel:</b>GÃ¥ runt lite</p>
        <p><b>Syfte:</b>Inget</p>
        <p><b>MÃ¥l:</b>â° â†’ ğŸ¬ â†’ â­ â†’ ğŸª‘</p>
        <p><b>Tip:</b>Tryck pÃ¥ Jesper fÃ¶r ğŸ‘‹ â€” dubbeltryck fÃ¶r ğŸ’ƒ</p>
      </div>
      <div class="modal__actions">
        <button id="closeHelpBtn" class="btn btn--big">Aha...</button>
      </div>
    </div>
  </div>

  <div id="wonder" class="wonder hidden" role="dialog" aria-modal="true">
    <div class="wonder__card">
      <div class="wonder__title">The return of the JESP</div>
      <div class="wonder__subtitle">Julfrid uppnÃ¥dd.</div>

      <div class="wonder__art">
        <img id="wonderImg" class="wonder__img" src="assets/julbild.jpg" alt="Julbild" />
        <div id="wonderFallback" class="wonder__fallback hidden">
          <div class="sparkle">âœ¨</div><div class="sparkle">âœ¨</div><div class="sparkle">âœ¨</div><div class="sparkle">âœ¨</div>
          <div class="sparkle">âœ¨</div><div class="sparkle">âœ¨</div><div class="sparkle">âœ¨</div><div class="sparkle">âœ¨</div>
          <div class="fallbackText">LÃ¤gg en bild i <b>/assets/julbild.jpg</b></div>
        </div>
      </div>
      <div class="wonder__actions">
        <button id="closeWonderBtn" class="btn btn--big">Tillbaka till rummet</button>
        <a id="secretSiteBtn" class="btn btn--big btn--alt" href="https://capstere.github.io/7thJan26/" target="_blank" rel="noopener">ğŸ”’ Hemlig genvÃ¤g</a>
      </div>
</div>
  </div>

  <canvas id="confetti" class="confetti hidden" aria-hidden="true"></canvas>


  <!-- Preload tavla-bilden (fallback: ritas i canvas om overlay inte kan anvÃ¤ndas) -->
  <img id="tavlaImg" src="assets/tavla.gif" alt="Tavla"
       style="position:fixed;left:-9999px;top:-9999px;width:1px;height:1px;opacity:0;pointer-events:none;" />

  <script src="main.js"></script>
  <script>
    // Service worker (offline cache) â€” krÃ¤ver https eller localhost
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("sw.js").catch(console.warn);
    }
  </script>

</body>
</html>
